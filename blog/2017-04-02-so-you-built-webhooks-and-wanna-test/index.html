<!doctype html><html class="not-ready text-sm lg:text-base" style=--bg:#f1efe1 lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>So, you built webhooks? And wanna test - siliconsenthil</title><meta name=theme-color><meta name=description content="When you build public facing APIs, there are operations that could not fit enough into request-response cycle. Especially, when it involves user interaction.
Take an example of sending email. You can expose an API endpoint for clients to send email. But whenever the email is opened, the client want to do some action. They can keep polling you and get the status of the email of course. But, that&rsquo;s suboptimal on both sides."><meta name=author content><link rel="preload stylesheet" as=style href=https://siliconsenthil.in/main.min.css><script defer src=https://siliconsenthil.in/highlight.min.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=preload as=image href=https://siliconsenthil.in/theme.png><link rel=preload as=image href=https://www.gravatar.com/avatar/b78415ec052d8811a4f31c4746cbde9f><link rel=preload as=image href=https://siliconsenthil.in/twitter.svg><link rel=preload as=image href=https://siliconsenthil.in/github.svg><link rel=preload as=image href=https://siliconsenthil.in/rss.svg><link rel=icon href=https://siliconsenthil.in/favicon.ico><link rel=apple-touch-icon href=https://siliconsenthil.in/apple-touch-icon.png><meta name=generator content="Hugo 0.101.0"><meta property="og:title" content="So, you built webhooks? And wanna test "><meta property="og:description" content="Ruby library to test webhook calling code."><meta property="og:type" content="article"><meta property="og:url" content="https://siliconsenthil.in/blog/2017-04-02-so-you-built-webhooks-and-wanna-test/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2017-04-02T23:28:00+05:30"><meta property="article:modified_time" content="2017-04-02T23:28:00+05:30"><meta itemprop=name content="So, you built webhooks? And wanna test "><meta itemprop=description content="Ruby library to test webhook calling code."><meta itemprop=datePublished content="2017-04-02T23:28:00+05:30"><meta itemprop=dateModified content="2017-04-02T23:28:00+05:30"><meta itemprop=wordCount content="235"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="So, you built webhooks? And wanna test "><meta name=twitter:description content="Ruby library to test webhook calling code."></head><body class="text-black duration-200 ease-out dark:text-white"><header class="mx-auto flex h-[5rem] max-w-3xl px-8 lg:justify-center"><div class="relative z-50 mr-auto flex items-center"><a class="-translate-x-[1px] -translate-y-0.5 text-3xl font-bold" href=https://siliconsenthil.in/>siliconsenthil</a>
<a class="btn-dark ml-6 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.png)_left_center/_auto_theme('spacing.6')_no-repeat] [transition:_background-position_0.4s_steps(5)] dark:[background-position:right]"></a></div><a class="btn-menu relative z-50 -mr-8 flex h-[5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden"></a>
<script>const htmlClass=document.documentElement.classList;setTimeout(()=>{htmlClass.remove("not-ready")},10);const btnMenu=document.querySelector(".btn-menu");btnMenu.addEventListener("click",()=>{htmlClass.toggle("open")});const metaTheme=document.querySelector('meta[name="theme-color"]'),lightBg=`"#f1efe1"`.replace(/"/g,""),setDark=e=>{metaTheme.setAttribute("content",e?"#000":lightBg),htmlClass[e?"add":"remove"]("dark"),localStorage.setItem("dark",e)},darkScheme=window.matchMedia("(prefers-color-scheme: dark)"),darkVal=localStorage.getItem("dark");setDark(darkVal?darkVal==="true":darkScheme.matches),darkScheme.addEventListener("change",e=>{setDark(e.matches)});const btnDark=document.querySelector(".btn-dark");btnDark.addEventListener("click",()=>{setDark(localStorage.getItem("dark")!=="true")})</script><div class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"><nav class="mt-12 flex justify-center space-x-10 dark:invert lg:mt-0 lg:ml-12 lg:items-center lg:space-x-6"><a class="h-8 w-8 [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./twitter.svg) href=https://twitter.com/siliconsenthil target=_blank></a>
<a class="h-8 w-8 [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./github.svg) href=https://github.com/siliconsenthil target=_blank></a>
<a class="h-8 w-8 [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./rss.svg) href=https://siliconsenthil.in/index.xml target=_blank></a></nav></div></header><main class="prose prose-neutral relative mx-auto min-h-[calc(100%-10rem)] max-w-3xl px-8 pt-20 pb-32 dark:prose-invert"><article><header class=mb-20><h1 class="!my-0 pb-2.5">So, you built webhooks? And wanna test</h1><div class="text-sm opacity-60"><time>Apr 2, 2017</time></div></header><section><p>When you build public facing APIs, there are operations that could not fit enough into request-response cycle. Especially, when it involves user interaction.</p><p>Take an example of sending email. You can expose an API endpoint for clients to send email. But whenever the email is opened, the client want to do some action. They can keep polling you and get the status of the email of course. But, that&rsquo;s suboptimal on both sides. So you want to tell the client when the email is opened. Now, that&rsquo;s when you do webhooks (<a href=https://webhooks.pbworks.com/w/page/13385124/FrontPage>ref</a>).</p><p>Webhooks are easier to build. After all, it&rsquo;s just one http call you will have to make.</p><p>But, testing it is not so.</p><p><strong>Public URL:</strong> We need the webhook URL to be accessible from the application server. For local testing <code>localhost</code> would do. But when you want to test the behaviour in CI ot other enviroments, it requires to be a public URL.</p><p><strong>Recorded requests:</strong> Once the application is invoked and it called the webhook URL, we need to assert on the request made by application. So we need a way to record those requests and assert later.</p><p>So <a href=https://github.com/siliconsenthil/webhook_recorder>webhook_recorder</a> is born. It uses <code>WEBrick</code> server to run locally and uses <a href=https://ngrok.com>ngrok</a> to expose that.</p><iframe src="https://docs.google.com/presentation/d/1-Ic9WCukD9D1FGYISvo1TAfa5hW5YsN0zCF9QotGujQ/embed?start=false&loop=false&delayms=3000" frameborder=0 width=600 height=460 allowfullscreen mozallowfullscreen=true webkitallowfullscreen=true></iframe><br><br><p><em>PS: We at <a href=https://getsimpl.com>Simpl</a> are in a mission of making money simple. We value quality, talent and most importantly culture. Wanna join hands? Let me know at <a href=https://twitter.com/siliconsenthil>@siliconsenthil</a></em></p></section><nav class="mt-24 flex rounded-lg bg-black/[3%] text-lg dark:bg-white/[8%]"><a class="flex w-1/2 items-center p-6 pr-3 no-underline" href=https://siliconsenthil.in/blog/2019-03-09-how-we-built-our-own-heroku/><span class=mr-1.5>←</span><span>How we built our own heroku</span></a>
<a class="ml-auto flex w-1/2 items-center justify-end p-6 pl-3 no-underline" href=https://siliconsenthil.in/blog/2014-06-27-why-scala-why-now/><span>Why scala should be your next programming language?</span><span class=ml-1.5>→</span></a></nav><div id=disqus_thread></div><script>const disqusShortname="siliconsenthil",script=document.createElement("script");script.src="https://"+disqusShortname+".disqus.com/embed.js",script.setAttribute("data-timestamp",+new Date),document.head.appendChild(script)</script></article></main><footer class="opaco mx-auto flex h-[5rem] max-w-3xl items-center px-8 text-[0.9em] opacity-60"><div class=mr-auto>&copy; 2022
<a class=link href=https://siliconsenthil.in/>siliconsenthil</a></div><a class="link mx-6" href=https://gohugo.io/ rel=noopener target=_blank>Powered by Hugo️️</a>️
<a class=link href=https://github.com/nanxiaobei/hugo-paper rel=noopener target=_blank>▷ Paper 6</a></footer></body></html>